@quill-cls: x-quill;

.@{quill-cls} {
  @apply relative flex flex-col;

  .ql-snow {
    &:not(.ql-disabled) {
      @apply resize-y;
    }

    &.ql-toolbar {
      @apply rounded-tl rounded-tr border-100 bg-container;

      .ql-formats {
        @apply mr-3;
      }

      .ql-picker.ql-expanded {
        .ql-picker-label {
          @apply border-100;
        }

        .ql-picker-options {
          @apply border-100;
        }
      }
    }

    &.ql-container {
      @apply rounded-bl rounded-br min-h-56 border-100 bg-container overflow-x-hidden scrollbar-thin;

      &.ql-disabled {
        @apply cursor-not-allowed;
      }
    }

    .ql-picker {
      @apply text-black/65 dark:text-white/65;

      &.ql-header {
        @apply w-20;

        .ql-picker-label {
          &::before {
            content: '段落';
          }

          &[data-value]::before {
            content: "标题" attr(data-value);
          }
        }

        .ql-picker-item {
          &::before {
            content: '段落';
          }

          &[data-value]::before {
            content: "标题" attr(data-value);
          }
        }
      }
    }

    .ql-picker-options {
      @apply bg-container;
    }

    .ql-stroke {
      @apply stroke-black/85 dark:stroke-white/65;
    }

    .ql-fill {
      &,
      &.ql-stroke {
        @apply fill-black/85 dark:fill-white/65;
      }
    }

    .ql-editor td {
      @apply dark:border-white/45;
    }

    .ql-operate-drag-table {
      @apply dark:border-white/45;
    }
  }

  .ql-editor.ql-blank::before {
    @apply not-italic dark:text-white/65;
  }

  .ql-editor .ql-table-better {
    width: unset;
  }

  .ql-table-button-disabled {
    @apply !bg-fill-secondary;
  }

  .ql-table-border-shadow,
  .ql-table-select-container,
  .ql-table-dropdown-list,
  .ql-table-dropdown-properties-list,
  .ql-table-menus-container {
    @apply border-100 bg-container;
  }

  .ql-table-menus-container {
    @apply h-auto px-3 py-2 rounded-md shadow-lg shadow-black/15;
  }

  .ql-table-triangle-up:not(.ql-table-triangle-none) {
    @apply before:!border-t-100;
  }

  .ql-table-select-container span {
    @apply dark:border-white/45;
  }

  .ql-table-dropdown {
    @apply mx-px p-1 rounded-sm hover:bg-primary/20;

    &:nth-child(1),
    &:nth-child(2),
    &:nth-child(3),
    &:nth-child(4),
    &:nth-child(5),
    &:nth-child(6) {
      svg:first-child path {
        @apply fill-black/85 dark:fill-white/65;
      }

      svg:last-child  {
        @apply size-4 ml-px;

        path {
          @apply stroke-black/85 dark:stroke-white/65;
        }
      }

      &:hover {
        svg:first-child path {
          @apply dark:fill-white/65;
        }

        svg:last-child path {
          @apply dark:stroke-white/65;
        }
      }
    }

    &:nth-child(5),
    &:nth-child(6) {
      svg path {
        @apply dark:stroke-white/65;
      }

      &:hover {
        svg path {
          @apply dark:stroke-white/65;
        }
      }
    }
  }

  .ql-table-dropdown-list,
  .ql-table-dropdown-properties-list {
    li:hover {
      @apply dark:bg-primary/45;
    }
  }

  .label-field-view-input-wrapper > label {
    @apply text-xs;
  }

  .ql-operate-block {
    @apply size-2 border-none bg-primary;
  }

  .ql-resize-overlay {
    @apply border-primary/55 border-solid;
    border-width: 3px;
  }

  .ql-resize-handle {
    @apply size-2 border-none bg-primary opacity-100;

    &.tl {
      @apply -top-1 -left-1;
    }

    &.tr {
      @apply -top-1 -right-1;
    }

    &.br {
      @apply -bottom-1 -right-1;
    }

    &.bl {
      @apply -bottom-1 -left-1;
    }
  }

  .ql-resize-toolbar {
    @apply left-1/2 px-3 py-2 h-auto rounded-md border shadow-lg shadow-black/15 bg-container -translate-x-1/2 -translate-y-full;
    top: -10px;
    right: auto;
    min-width: max-content;

    &::after {
      @apply absolute left-1/2 bottom-0 size-3 bg-container translate-y-1/2 rotate-45 rounded-xs border-b border-r;
      content: ' ';
    }

    button {
      @apply h-auto mx-px p-1 border-none bg-transparent hover:bg-primary/35 rounded-sm;

      &.active {
        @apply filter-none bg-primary/65;
      }
    }
  }
}
